## План автоматизации с информацией:

 
Настоящий план автоматизации предполагает проведение функционального тестирования приложения.

В ходе тестирования планируется провести:

- **Тестирование пользовательского интерфейса и юзабилити**


Будут написаны авто-тесты, имитирующие возможные способы перехода пользователями со страницы тура
к форме отправки платежных данных для оплаты тура, включающие в себя:


1. Обычную оплату по дебетовой карте

2. Выдачу кредита по данным банковской карты

Также будет произведена проверка видимости и работоспособности
существующих элементов страниц, которые для этого необходимы.


- **Автоматизация тестирования формы отправки платежных данных**


Будут написаны авто-тесты, проводящие позитивные и негативные проверки валидации отправляемых пользователем платежных данных.
В условиях отсутствия ТЗ на тестируемый сервис, данные проверки будут базироваться на основе опыта
и требований аналогичных сервисов.

- **Автоматизация интеграционного тестирования с СУБД**


Будут написаны авто-тесты интеграции работы сервиса с MySQL и PostgreSQL и проверяющие вносимые приложением в СУБД записи,
в частности:
каким способом был совершён платёж и успешно ли он был совершён. При всех финансовых операциях
не должно происходить сохранение информации о данных пользовательских карт.

### Исходные данные:
* APPROVED карта — `1111 2222 3333 4444`;
* DECLINED карта — `5555 6666 7777 8888`.

### Валидные данные:
- Поле *`Номер карты`* - 1111 2222 3333 4444 (APPROVED карта);
- Поле *`Номер карты`* - 5555 6666 7777 8888 (DECLINED карта);
- Поле *`Месяц`* - 2-х значное число (от 01 до 12);
- Поле *`Год`* - 2-х значное число от 23 до 28 (срок действия карты - 5 лет);
- Поле *`Владелец`* - имя и фамилия на латинице (имя может состоять из одного слова, из двух слов, написанных через дефис или пробел, фамилия также может состоять из одного слова или из двух слов);
- Поле *`CVC/CVV`* - 3-х значное число (от 001 до 999).

### Невалидные данные:
Поле *`Номер карты`*:

- рандомный номер, отличный от тестовых (1111 6666 2222 8888);
- пустое поле;
- нули (0000 0000 0000 0000);
- 1 цифра;
- 15 цифр;
- 17 цифр;

Поле *`Месяц`*:
- пустое поле;
- нули (00);
- одна цифра;
- число больше 12-ти;

Поле *`Год`*:
- 23 (прошлый год);
- 30 (текущий год + 6 лет);
- пустое поле;
- нули (00);
- 1 цифра;

Поле *`Владелец`*:
- имя и фамилия на кирилице;
- спецсимволы, кроме дефиса;
- одно слово на латинице;
- цифры;
- пустое поле;
- нули (000 000);

Поле *`CVC/CVV`*:
- пустое поле;
- нули (00);
- 1 цифра.

###  I Перечень автоматизируемых сценариев ;

### **UI сценарии**

#### **Предусловия:**
1. Открыть страницу http://localhost:8080
2. Нажать кнопку `Купить`, открывается `Оплата по карте` ИЛИ
3. Нажать кнопку `Купить в кредит`, открывается `Кредит по данным карты`

|  №  | Отправка формы                                                                               | Результат                            |
|:---:|:---------------------------------------------------------------------------------------------|:-------------------------------------|
|     | **Позитивные сценарии**                                                                      |                                      |
|  1  | Покупка `Оплата по карте` / `Кредит по данным карты` со статусом `APPROVED` валидные данные  | `Успешно` Операция одобрена банком   |
|  2  | Покупка `Оплата по карте` / `Кредит по данным карты` со статусом `DECLINED` валидные данные  | `Успешно` Операция одобрена банком  |
|     | **Негативны сценарии**                                                                       |                                      |
|  3  | Поле`Номер карты` - ввод невалидных данных `Оплата по карте` / `Кредит по данным карты`      | `Ошибка` Отказ в проведении операции |
|  4  | Поле `Месяц` - ввод невалидных данных `Оплата по карте` / `Кредит по данным карты`           | `Ошибка` Отказ в проведении операции |
|  5  | Поле `Год` - ввод невалидных данных `Оплата по карте` / `Кредит по данным карты`             | `Ошибка` Отказ в проведении операции |
|  6  | Поле `Владелец` - ввод невалидных данных `Оплата по карте` / `Кредит по данным карты`        | `Ошибка` Отказ в проведении операции |
|  7  | Поле `CVC` - ввод невалидных данных `Оплата по карте` / `Кредит по данным карты`             | `Ошибка` Отказ в проведении операции |
|  8  | Отправление данных с незаполненными полями `Оплата по карте` / `Кредит по данным карты`      | `Ошибка` Отказ в проведении операции |

### **API сценарии**

|  №  | Отправка формы                                                                          | Результат                           |
|:---:|:----------------------------------------------------------------------------------------|:------------------------------------|
|  1  | Отправка POST запроса `Купить` с валидным body и карты со статусом `APPROVED`           | статус 200, появление  записи в БД  |
|  2  | Отправка POST запроса `Купить в кредит`  с валидным body и карты со статусом `APPROVED` | статус 200, появление  записи в БД  |
|  3  | Отправка POST запроса `Купить` с валидным body и карты со статусом `DECLINED`           | статус 200, появление  записи в БД  |
|  4  | Отправка POST запроса `Купить в кредит` с валидным body и карты со статусом `DECLINED`  | статус 200, появление  записи в БД  |
|  5  | Отправка POST запроса с пустым значением у атрибута `body`                              | статус 400, отсутствие записи в БД  |
|  6  | Отправка POST запроса с пустым значением у атрибута `number`                            | статус 400, отсутствие записи в БД  |
|  7  | Отправка POST запроса с пустым значением у атрибута `month`                             | статус 400, отсутствие записи в БД  |
|  8  | Отправка POST запроса с пустым значением у атрибута `year`                              | статус 400, отсутствие записи в БД  |
|  9  | Отправка POST запроса с пустым значением у атрибута `holder`                            | статус 400, отсутствие записи в БД  |
| 10  | Отправка POST запроса с пустым значением у атрибута `cvc`                               | статус 400, отсутствие записи в БД  |


### II  Перечень используемых инструментов с обоснованием выбора;

1. IntelliJ IDEA - программа, в которой пишем код.
2. Git и GitHub - для сохранения репозитория и обмена с куратором проекта.
3. Docker Desktop -  наиболее распространенная система контейнеризации.
4. MySQL - для тестирования БД
5. Developer Tools - для просмотра html. 
6. Java - язык, на котором будем писать код.
7. Gradle - система автоматической сборки внутри IntelliJ IDEA, которую используют для упрощения работы с Java;
8. JUnit 5 - библиотека для модульного тестирования для Java, оснащенная множеством функций, включая вложенные тесты, параметризованные тесты, новые API расширения или поддержку Java;.
9. Selenide - (для удбоного открытия броузрера и поиска элементов по css или Xpath).фреймворк для автоматизированного тестирования веб-приложений на основе Selenium WebDriver, имеет простую конфигурацию по сравнению с Selenium;
10. Rest-assured - для проверки запросов API.Java-библиотека для автоматизации тестирования REST-API;
11. Faker / Random - генерация пользовательских данных (имени и телефона).
12. LocalDate - для генерации даты.
возможно
13. Allure - для генерации отчетов.
14. Postman (при необходимости) - для проверки запросов API
 
  
### III Перечень и описание возможных рисков при автоматизации;

- Отсутствие документации на приложение (какое поведение системы считать ошибочным)
- Возможные проблемы при поиске CSS-локаторов функциональных элементов на страницах приложения, что может привести
  к увеличению сроков написания автотестов, а также к повышению сложности и стоимости их поддержки
- Возможны проблемы при подготовке необходимой тестовой среды, в частности, подключение 2-х видов СУБД,
  node.js для запуска заглушки банковских сервисов, а также интеграции проекта с CI
- Тесты UI  потеряют актуальность при любом изменении дизайна и могут не покрывать всех возможных сценариев (пользователь может повести себя так, как мы не можем предвидеть)
- Потеря актуальности тестов API при изменение структуры запросов со стороны банка 
- Актуализация, обновление и поддержка тестов может занять достаточно большое количество времени


### IV  Интервальная оценка с учётом рисков в часах;


| № | Наименование работы                                                                             | Оценка с учетом рисков ~30% (в часах) |
|:-:|:------------------------------------------------------------------------------------------------|:-------------------------------------:|
| 1 | Ознакомление с проектом + план автоматизации тестирования                                       |                                   8   |  
| 2 | Написание и отладка авто-тестов                                                                 |                                48-55  |   
| 3 | Настройка окружения и поведение тестирования                                                    |                                   7   | 
| 4 | Подготовка и оформление баг-репортов                                                            |                                  16   | 
| 5 | Формирование отчета о проведенном тестировании                                                  |                                   4   | 
| 6 | Формирование отчета о проведённой автоматизации тестирования                                    |                                   5   |
|   | ИТОГО                                                                                           |                               88-95   | 


### V  План сдачи работ: когда будут проведены автотесты, результаты их проведения и отчёт по автоматизации.



|  №  | Наименование работы                                 | Дата сдачи |
|:---:|:----------------------------------------------------|:----------:|
|  1  | План автоматизации тестирования                     | 06.05.2024 |
|  2  | Написание и отладка авто-тестов                     | 13.05.2024 |
|  3  | Подготовка и оформление репортов                    | 15.05.2024 |
|  4  | Отчеты по тестированию и автоматизации тестирования | 17.05.2024 |
